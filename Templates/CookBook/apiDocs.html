{% extends 'CookBook/base.html' %}

{% block title %}API Documentation - CookBook{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <h1 class="display-5">
            <i class="bi bi-code-square" style="color: #1565C0;"></i> API Documentation
        </h1>
        <p class="lead text-muted">Access CookBook recipes via RESTful API endpoints</p>
    </div>
</div>

<!-- API Endpoints Section -->
<div class="row">
    <div class="col-lg-8">
        {% for endpoint in api_endpoints %}
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                    <span class="badge bg-success me-2">{{ endpoint.method }}</span>
                    {{ endpoint.name }}
                </h5>
            </div>
            <div class="card-body">
                <p><strong>Endpoint:</strong> <code>{{ endpoint.endpoint }}</code></p>
                <p>{{ endpoint.description }}</p>
                
                <h6 class="mt-3">Example Request:</h6>
                <pre><code>{{ endpoint.example }}</code></pre>
                
                <h6 class="mt-3">Example Response:</h6>
                <pre><code>{{ endpoint.response_example|safe }}</code></pre>
            </div>
        </div>
        {% endfor %}
    </div>
    
    <div class="col-lg-4">
        <div class="card sticky-top" style="top: 2rem;">
            <div class="card-header bg-info text-white">
                <h6 class="mb-0"><i class="bi bi-info-circle"></i> Quick Links</h6>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li class="mb-2">
                        <a href="/api/" target="_blank" class="btn btn-sm btn-outline-info w-100">
                            <i class="bi bi-arrow-up-right"></i> API Root
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="/api/random/" target="_blank" class="btn btn-sm btn-outline-info w-100">
                            <i class="bi bi-arrow-up-right"></i> Try Random Recipe
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Usage Guide -->
<div class="card mt-4">
    <div class="card-header">
        <h5 class="mb-0">Getting Started with the API</h5>
    </div>
    <div class="card-body">
        <h6>Base URL</h6>
        <p><code>{{ request.build_absolute_uri '/api' }}</code></p>
        
        <h6 class="mt-3">Authentication</h6>
        <p>Currently, no authentication is required. API endpoints are publicly accessible.</p>
        
        <h6 class="mt-3">Response Format</h6>
        <p>All responses are returned in JSON format.</p>
        
        <h6 class="mt-3">Error Handling</h6>
        <p>Errors are returned with appropriate HTTP status codes and error messages in the response body.</p>
    </div>
</div>
{% endblock %}
